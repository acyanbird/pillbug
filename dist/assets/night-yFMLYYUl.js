import{G as W,W as j,S as C,B as T,F as O,P as D,V as R,a as V,M as I,D as q,b as u,A as U,c as J,d as P,e as K,T as N,j as Q,k as X,h as b,O as Y,l as Z,m as L,n as _,o as $}from"./GLTFLoader-CK7oojKx.js";let f,ee=new W,r,z=.15,h={},p,A,w,n,s,B,k,y=!1,g=3,x=0,d,F=[],a,G=[],l,c,S=window.innerWidth,M=window.innerHeight,v=window.innerWidth/window.innerHeight;function te(){B=document.getElementById("gl-canvas"),s=new j({canvas:B}),p=E(3),A=E(5),w=p,n=new C,s.setSize(S,M),s.shadowMap.enabled=!0,s.shadowMap.type=T;let e=le();n.add(e),n.fog=new O(592146,.035),pe(),oe(),de(),we(),re(),ie(),s.render(n,w),window.addEventListener("click",function(){ne()}),H(),window.addEventListener("resize",ae),window.addEventListener("keydown",function(t){h[t.key]=!0}),window.addEventListener("keyup",function(t){h[t.key]=!1})}te();function ne(){w===p?w=A:w=p,s.render(n,w)}function E(e){let t=new D(75,v,.1,1e3);return t.position.y=e,t.lookAt(new R(0,0,-10)),t}function ie(){let e=new V(13,120,5,5),t=new I({color:10066329,emissive:16711680,emissiveIntensity:.2,side:q}),i=new u(e,t);i.position.set(0,0,0),i.rotation.x=Math.PI/2,i.receiveShadow=!0,n.add(i)}function oe(){k=new U(16777215,.8),n.add(k);const e=new J(16777215,1.5);e.position.set(0,5,-50),e.castShadow=!0,n.add(e)}function ae(){S=window.innerWidth,M=window.innerHeight,v=window.innerWidth/window.innerHeight,p.aspect=v,p.updateProjectionMatrix(),s.setSize(S,M),s.render(n,p)}function re(){ee.load("./assets/pill.glb",function(e){r=e.scene,r.scale.set(.3,.3,.3),r.position.set(0,.2,-3),e.scene.traverse(function(t){t.isMesh&&(t.castShadow=!0)}),n.add(r),f=new P().setFromObject(r)},void 0,function(e){console.error(e)})}function H(){if(y){document.getElementById("end").style.display="block";return}r&&f.setFromObject(r),F.forEach(e=>{e.position.z+=z,e.visible=e.position.z<0&&e.position.z>-50,e.position.z>0&&(e.position.x=o(-5,5),e.position.z+=o(-90,-40));let t=new K(e.position,.18);f&&f.intersectsSphere(t)&&(e.position.x=o(-5,5),e.position.z+=o(-90,-40),x+=1,document.getElementById("score").innerHTML="Score: "+x,new Audio("./assets/getpoint.wav").play())}),G.forEach(e=>{e.position.z+=z,e.visible=e.position.z<0&&e.position.z>-60,e.position.z>0&&(e.position.x=o(-5,5),e.position.z+=o(-90,-40)),e.rotation.x+=.01,e.rotation.y+=.01;let t=new P().setFromObject(e);console.log(t),f&&f.intersectsBox(t)&&(e.position.x=o(-5,5),e.position.z+=o(-90,-40),g-=1,document.getElementById("life").innerHTML="Life: "+g,g!==0?new Audio("./assets/loselife.wav").play():(new Audio("./assets/gameover.wav").play(),y=!0,document.getElementById("finalScore").innerHTML="Final Score: "+x,document.getElementById("end").style.display="block"))}),h.ArrowLeft&&r.position.x>-4.5&&(r.position.x-=.065),h.ArrowRight&&r.position.x<4.5&&(r.position.x+=.065),l.rotation.x+=.01,l.rotation.y+=.01,c.rotation.x+=.01,c.rotation.y+=.01,s.render(n,w),y||requestAnimationFrame(H)}function o(e,t){return Math.random()*(t-e)+e}function se(){let e=new b(.2,32,32),t=new _({color:16776960});return d=new u(e,t),d.castShadow=!0,d.receiveShadow=!0,n.add(d),d}function de(){for(let e=0;e<15;e+=1)d=se(),d.position.set(o(-5,5),.5,o(-70,-50)),F.push(d),n.add(d)}function le(){let e=new N().load("./assets/backgroundstar.jpg"),t=new Q({map:e,side:X}),i=new b(40,64,64);return new u(i,t)}function ce(){let e=new $(.6,.6,.6),t=new I({color:16711680,transparent:!0,opacity:.6});return a=new u(e,t),a.castShadow=!0,a.receiveShadow=!0,a.rotation.x=Math.PI/4,a.rotation.y=Math.PI/4,n.add(a),a}function we(){for(let e=0;e<5;e+=1)a=ce(),a.position.set(o(-5,5),.5,o(-70,-50)),G.push(a),n.add(a)}function pe(){let e=new Y(.4),t=new Z({color:"white",transparent:!0,opacity:.5,roughness:.3,reflectivity:.7,clearcoat:.8});l=new u(e,t),l.position.set(-3,4,-5),l.castShadow=!0,l.rotation.y=Math.PI/4,c=new u(e,t),c.position.set(3,3.5,-6),c.castShadow=!0,c.rotation.y=Math.PI/4,n.add(l,c);let i=new L("red",8);i.position.set(-3,5,-5),i.target=l,i.castShadow=!0;let m=new L("blue",8);m.position.set(3,4.5,-6),m.target=c,n.add(i,m)}
