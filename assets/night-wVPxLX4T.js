import{G as R,W as q,S as D,P as U,F as V,a as Y,V as _,b as K,M as A,D as N,c as m,A as J,d as Q,m as X,B as F,e as Z,g as $,l as ee,f as te,n as ne,O as oe,o as ie,p as I,j as ae,q as re,r as se}from"./getpoint-EG9kQnpn.js";const f=""+new URL("starbackgroundsquare-YY_6p_VK.jpg",import.meta.url).href;let p,de=new R,r,P=.18,g={},u,C,w,n,s,b,k,h,x=!1,M=3,S=0,d,G=[],a,W=[],l,c,L=window.innerWidth,v=window.innerHeight,z=window.innerWidth/window.innerHeight,B="Life: ",E="Score: ",H="Game Over",j="Final Score: ";function le(){new URLSearchParams(window.location.search).get("lang")==="zh"&&(B="生命: ",E="分数: ",H="游戏结束",j="最终得分: ",document.getElementById("score").innerHTML=E+0,document.getElementById("life").innerHTML=B+3,document.getElementById("endText").innerHTML=H,document.getElementById("restart").innerHTML="点击这里回到主菜单",document.getElementById("restart").href="index-zh.html"),b=document.getElementById("gl-canvas"),s=new q({canvas:b,antialias:!0}),u=T(3),C=T(5),w=u,n=new D,s.setSize(L,v),s.shadowMap.enabled=!0,s.shadowMap.type=U,ge(),n.fog=new V(592146,.035),Me(),ue(),he(),xe(),pe(),we(),s.render(n,w),window.addEventListener("click",function(){ce()}),O(),window.addEventListener("resize",fe),window.addEventListener("keydown",function(t){g[t.key]=!0}),window.addEventListener("keyup",function(t){g[t.key]=!1})}le();function ce(){w===u?w=C:w=u,s.render(n,w)}function T(e){let t=new Y(75,z,.1,1e3);return t.position.y=e,t.lookAt(new _(0,0,-10)),t}function we(){let e=new K(13,60,2,10),t=new A({color:10066329,emissive:16711680,emissiveIntensity:.2,side:N}),o=new m(e,t);o.position.set(0,0,-30),o.rotation.x=Math.PI/2,o.receiveShadow=!0,n.add(o)}function ue(){k=new J(16777215,.8),n.add(k),h=new Q(16777215,1.5),h.position.set(0,5,-50),h.castShadow=!0,n.add(h)}function fe(){L=window.innerWidth,v=window.innerHeight,z=window.innerWidth/window.innerHeight,u.aspect=z,u.updateProjectionMatrix(),s.setSize(L,v),s.render(n,u)}function pe(){de.load(X,function(e){r=e.scene,r.scale.set(.35,.35,.35),r.position.set(0,0,-3),e.scene.traverse(function(t){t.isMesh&&(t.castShadow=!0)}),n.add(r),p=new F().setFromObject(r)},void 0,function(e){console.error(e)})}function O(){if(x){document.getElementById("end").style.display="block";return}r&&p.setFromObject(r),G.forEach(e=>{e.position.z+=P,e.visible=e.position.z<0&&e.position.z>-60,e.position.z>0&&(e.position.x=i(-5,5),e.position.z+=i(-90,-40));let t=new Z(e.position,.18);p&&p.intersectsSphere(t)&&(e.position.x=i(-5,5),e.position.z+=i(-90,-40),S+=1,document.getElementById("score").innerHTML=E+S,new Audio($).play())}),W.forEach(e=>{e.position.z+=P,e.visible=e.position.z<0&&e.position.z>-60,e.position.z>0&&(e.position.x=i(-5,5),e.position.z+=i(-90,-40)),e.rotation.x+=.01,e.rotation.y+=.01;let t=new F().setFromObject(e);console.log(t),p&&p.intersectsBox(t)&&(e.position.x=i(-5,5),e.position.z+=i(-90,-40),M-=1,document.getElementById("life").innerHTML=B+M,M!==0?new Audio(ee).play():(new Audio(te).play(),x=!0,document.getElementById("finalScore").innerHTML=j+S,document.getElementById("end").style.display="block"))}),g.ArrowLeft&&r.position.x>-4.5&&(r.position.x-=.065),g.ArrowRight&&r.position.x<4.5&&(r.position.x+=.065),l.rotation.x+=.01,l.rotation.y+=.01,c.rotation.x+=.01,c.rotation.y+=.01,s.render(n,w),x||requestAnimationFrame(O)}function i(e,t){return Math.random()*(t-e)+e}function me(){let e=new ae(.2,32,32),t=new re({color:16776960});return d=new m(e,t),d.castShadow=!0,d.receiveShadow=!0,n.add(d),d}function he(){for(let e=0;e<15;e+=1)d=me(),d.position.set(i(-5,5),.5,i(-90,-40)),G.push(d),n.add(d)}function ge(){let t=new ne().load([f,f,f,f,f,f]);n.background=t}function ye(){let e=new se(.6,.6,.6),t=new A({color:16711680,transparent:!0,opacity:.6});return a=new m(e,t),a.castShadow=!0,a.receiveShadow=!0,a.rotation.x=Math.PI/4,a.rotation.y=Math.PI/4,n.add(a),a}function xe(){for(let e=0;e<5;e+=1)a=ye(),a.position.set(i(-5,5),.5,i(-90,-40)),W.push(a),n.add(a)}function Me(){let e=new oe(.4),t=new ie({color:"white",transparent:!0,opacity:.5,roughness:.3,reflectivity:.7,clearcoat:.8});l=new m(e,t),l.position.set(-3,4,-5),l.castShadow=!0,l.rotation.y=Math.PI/4,c=new m(e,t),c.position.set(3,3.5,-6),c.castShadow=!0,c.rotation.y=Math.PI/4,n.add(l,c);let o=new I(6172264,18);o.position.set(-3,5,-5),o.target=l,o.castShadow=!0;let y=new I(2002860,18);y.position.set(3,4.5,-6),y.target=c,n.add(o,y)}
